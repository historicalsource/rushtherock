head	1.2;
access;
symbols
	AREA_52_00:1.1;
locks; strict;
comment	@;; @;


1.2
date	97.07.31.23.00.54;	author shepperd;	state Exp;
branches;
next	1.1;

1.1
date	97.05.17.01.50.21;	author shepperd;	state Exp;
branches;
next	;


desc
@NILE 3 defines.
@


1.2
log
@Added support for alternate W2 address space.
@
text
@/* nile3.mac						*/
/*							*/
/* Include file for the Nile3 used on Chameleon		*/
/*							*/
/* Written By:	Andrew Dyer <adyer@@mcs.com>		*/
/* 		Midway Games, Inc.			*/
/* Date:	Tue Feb 25 10:41:11 CST 1997		*/
/* Translated to macpp: 970507_DMS			*/
;
.if not_defined, _NILE3_MAC_
_NILE3_MAC_ == 0
;
.DEFINE BASIC_TYPE	VU32
;
;/* Nile 3 Reset register base address */
	REG NILE3	(0xa0000000|0x0f000000)
;
;/* Nile 3 Base memory Control register */
	REG NILE3_BASE_MEM_CTRL		(NILE3_BASE+0x00)
	HEX_CONST NILE3_BASE_INTRLV		0x00000040
	HEX_CONST NILE3_BASE_PAGEMODE		0x00000080
	HEX_CONST NILE3_BASE_SIZE_4MB		(0<<14)
	HEX_CONST NILE3_BASE_SIZE_8MB		(2<<14)
	HEX_CONST NILE3_BASE_SIZE_16MB		(3<<14)
	HEX_CONST NILE3_BASE_BASEADD		0x0FC00000
;
;/* Nile 3 SIMM memory control register */
	REG 	NILE3_SIMM_CTRL_1		(NILE3_BASE+0x04)
	REG	NILE3_SIMM_CTRL_2		(NILE3_BASE+0x08)
	REG	NILE3_SIMM_CTRL_3		(NILE3_BASE+0x0C)
	REG	NILE3_SIMM_CTRL_4		(NILE3_BASE+0x10)
	HEX_CONST   NILE3_SIMM_FPM		0x00000001
	HEX_CONST   NILE3_SIMM_FLASH		0x00000002
	HEX_CONST   NILE3_SIMM_DUAL_SIDE	0x00000004
	HEX_CONST   NILE3_SIMM_ID		0x00000040
	HEX_CONST   NILE3_SIMM_D31		0x00000080
	HEX_CONST   NILE3_SIMM_INTRLV		0x00000100
	HEX_CONST   NILE3_SIMM_SDMRS		0x00000200
	HEX_CONST   NILE3_SIMM_SDINIT		0x00000400
	HEX_CONST   NILE3_SIMM_MASK		0x0003E000
	HEX_CONST   NILE3_SIMM_MASK_16M		0x00030000 
	HEX_CONST   NILE3_SIMM_MASK_2M		0x0003E000
	HEX_CONST   NILE3_SIMM_ADD		0x0FE00000
;
;/* these bit definitions are common to the base and simm registers */
	HEX_CONST   NILE3_MEM_EDO		0x00000000
	HEX_CONST   NILE3_MEM_SDRAM		0x00000003
	HEX_CONST   NILE3_MEM_ENABLE		0x00000008
	HEX_CONST   NILE3_MEM_MUX_BY9		0x00000000
	HEX_CONST   NILE3_MEM_MUX_BY10		0x00000010
	HEX_CONST   NILE3_MEM_MUX_BY11		0x00000020
	HEX_CONST   NILE3_MEM_MUX_BY12		0x00000030
;
;/* Nile 3 PCI Master Address Window Registers */
	REG NILE3_PCI_MASTER_WINDOW_1	(NILE3_BASE+0x14)
	REG NILE3_PCI_MASTER_WINDOW_2	(NILE3_BASE+0x18)
	REG NILE3_PCI_MASTER_IO_WINDOW	(NILE3_BASE+0x24)
	HEX_CONST   NILE3_PCI_MASTER_PCIADD	0x000000FF
	HEX_CONST   NILE3_PCI_MASTER_ENAB	0x00001000
	HEX_CONST   NILE3_PCI_MASTER_MASK	0x000FE000
	HEX_CONST   NILE3_PCI_MASTER_MASK_16M	0x000FE000
	HEX_CONST   NILE3_PCI_MASTER_MASK_32M	0x000FC000
	HEX_CONST   NILE3_PCI_MASTER_MASK_64M	0x000F8000
	HEX_CONST   NILE3_PCI_MASTER_MASK_128M	0x000F0000
	HEX_CONST   NILE3_PCI_MASTER_MASK_256M	0x000E0000
	HEX_CONST   NILE3_PCI_MASTER_MASK_512M	0x000C0000
	HEX_CONST   NILE3_PCI_MASTER_MASK_1G	0x00080000
	HEX_CONST   NILE3_PCI_MASTER_LADD	0xFF000000
;
;/* Nile 3 PCI Slave Address Window Registers */
	REG NILE3_PCI_SLAVE_WINDOW_1	(NILE3_BASE+0x1C)
	REG NILE3_PCI_SLAVE_WINDOW_2	(NILE3_BASE+0x20)
	HEX_CONST   NILE3_PCI_SLAVE_LADD	0x000007FF
	HEX_CONST   NILE3_PCI_SLAVE_ENAB	0x00001000
	HEX_CONST   NILE3_PCI_SLAVE_MASK	0x000FE000
	HEX_CONST   NILE3_PCI_SLAVE_MASK_2M	0x000FE000
	HEX_CONST   NILE3_PCI_SLAVE_MASK_4M	0x000FC000
	HEX_CONST   NILE3_PCI_SLAVE_MASK_8M	0x000F8000
	HEX_CONST   NILE3_PCI_SLAVE_MASK_16M	0x000F0000
	HEX_CONST   NILE3_PCI_SLAVE_MASK_32M	0x000E0000
	HEX_CONST   NILE3_PCI_SLAVE_PCIADD	0xFFE00000
;
	REG NILE3_PCI_CONFIG_DATA	(NILE3_BASE+0x28)
	REG NILE3_PCI_CONFIG_ADDRESS	(NILE3_BASE+0x2C)
	HEX_CONST   NILE3_PCI_CONFIG_ADD_ENAB	0x80000000
;
	REG NILE3_PCI_MBOX_1		(NILE3_BASE+0x30)
	REG NILE3_PCI_MBOX_2		(NILE3_BASE+0x34)
;
;/* Nile 3 DMA Control Registers */
	REG NILE3_DMA_CTRL_1		(NILE3_BASE+0x38)
	REG NILE3_DMA_CTRL_2		(NILE3_BASE+0x44)
	HEX_CONST    NILE3_DMA_CTRL_BLKSIZE	0x000FFFFF
	HEX_CONST    NILE3_DMA_CTRL_BOUNDPT	0x00F00000
	HEX_CONST    NILE3_DMA_CTRL_DRST	0x01000000
	HEX_CONST    NILE3_DMA_CTRL_MIO		0x02000000
	HEX_CONST    NILE3_DMA_CTRL_INC		0x04000000
	HEX_CONST    NILE3_DMA_CTRL_SU		0x08000000
	HEX_CONST    NILE3_DMA_CTRL_GO		0x10000000
	HEX_CONST    NILE3_DMA_CTRL_RW		0x20000000
	HEX_CONST    NILE3_DMA_CTRL_IE		0x40000000
	HEX_CONST    NILE3_DMA_CTRL_BZ		0x80000000
;
	REG NILE3_DMA_LOCAL_ADDR_1	(NILE3_BASE+0x3C)
	REG NILE3_DMA_LOCAL_ADDR_2	(NILE3_BASE+0x48)
	REG NILE3_DMA_PCI_ADDR_1	(NILE3_BASE+0x40)
	REG NILE3_DMA_PCI_ADDR_2	(NILE3_BASE+0x4C)
;
;/* Nile 3 Bus Error Status Register */
	REG NILE3_BUS_ERR_STATUS	(NILE3_BASE+0x50)
	HEX_CONST    NILE3_BUS_ERR_ET_MASK	0x00000003
	HEX_CONST    NILE3_BUS_ILL_ADD		0x00000000
	HEX_CONST    NILE3_BUS_TGT_ABORT	0x00000001
	HEX_CONST    NILE3_BUS_MST_ABORT	0x00000002
	HEX_CONST    NILE3_BUS_RETRY_LIMIT	0x00000003
;
;/* Nile 3 Interrupt Control/Status Register */
	REG NILE3_INT_CTRL		(NILE3_BASE+0x54)
	HEX_CONST    NILE3_INT_CBE		0x00000001
	HEX_CONST    NILE3_INT_DMA1		0x00000002
	HEX_CONST    NILE3_INT_DMA2		0x00000004
	HEX_CONST    NILE3_INT_MB1		0x00000008
	HEX_CONST    NILE3_INT_MB2		0x00000010
	HEX_CONST    NILE3_INT_DBE		0x00000020
	HEX_CONST    NILE3_INT_PBE		0x00000040
	HEX_CONST    NILE3_INT_PAR		0x00000080
	HEX_CONST    NILE3_INT_CBEMSK		0x00000100
	HEX_CONST    NILE3_INT_DMA1MSK		0x00000200
	HEX_CONST    NILE3_INT_DMA2MSK		0x00000400
	HEX_CONST    NILE3_INT_MB1MSK		0x00000800
	HEX_CONST    NILE3_INT_MB2MSK		0x00001000
	HEX_CONST    NILE3_INT_DBEMSK		0x00002000
	HEX_CONST    NILE3_INT_PBEMSK		0x00004000
	HEX_CONST    NILE3_INT_PARMSK		0x00008000
	HEX_CONST    NILE3_INT_CBECLR		0x01000000
	HEX_CONST    NILE3_INT_DMA1CLR		0x02000000
	HEX_CONST    NILE3_INT_DMA2CLR		0x04000000
	HEX_CONST    NILE3_INT_MB1CLR		0x08000000
	HEX_CONST    NILE3_INT_MB2CLR		0x10000000
	HEX_CONST    NILE3_INT_DBECLR		0x20000000
	HEX_CONST    NILE3_INT_PBECLR		0x40000000
	HEX_CONST    NILE3_INT_PARCLR		0x80000000
	HEX_CONST    NILE3_INT_CLRALL		0xff000000

;/* Nile 3 Refresh Control Register */
	REG NILE3_REFRESH		(NILE3_BASE+0x58)
	HEX_CONST    NILE3_REFRESH_CNTR		0x00000FFF
	HEX_CONST    NILE3_REFRESH_ENAB		0x00001000
;
;/* Nile 3 Boot Write Protect Register */
	REG NILE3_BOOT_PROT		(NILE3_BASE+0x5C)
	HEX_CONST    NILE3_BOOT_WPROT		0x0000003F
	HEX_CONST    NILE3_BOOT_KEY		0xC0DE9900
;
	REG NILE3_EXCLUSIVE_ACCESS	(NILE3_BASE+0x60)
	REG NILE3_DMA_WORD_CNT		(NILE3_BASE+0x64)
	REG NILE3_DMA_CURRENT_MEM_ADDR	(NILE3_BASE+0x68)
	REG NILE3_DMA_CURRENT_PCI_ADDR	(NILE3_BASE+0x6C)
	REG NILE3_PCI_RETRY_CNT		(NILE3_BASE+0x70)
	REG NILE3_PCI_ARB		(NILE3_BASE+0x74)
	HEX_CONST NILE3_PCIARB_ENAB		0x01
	HEX_CONST NILE3_PCIARB_ONCARD		0x02
	HEX_CONST NILE3_PCIARB_CFG_DONE		0x04
	HEX_CONST NILE3_PCIARB_SET_INTA		0x08
	HEX_CONST NILE3_PCIARB_RST_NMI		0x10
;
;/* Undocumented mystery register */
	REG NILE3_BLACK_HOLE_REG	(NILE3_BASE+0x78)
	HEX_CONST NILE3_BLACK_HOLE_SYNCMRS	0x01
	HEX_CONST NILE3_BLACK_HOLE_SDINIT	0x02
	HEX_CONST NILE3_BLACK_HOLE_REFENAB	0x04
;
;/* host bridge configuration registers */
;/* these are only the writable ones */
;
;/* Nile 3 PCI Command and Status registers and bits */
	REG NILE3_PCICMD		(NILE3_BASE+0x104)
	HEX_CONST    NILE3_PCICMD_MEMEN		0x00000002
	HEX_CONST    NILE3_PCICMD_BMAS		0x00000004
	HEX_CONST    NILE3_PCICMD_PER		0x00000040
	HEX_CONST    NILE3_PCICMD_SERR_EN	0x00000100
	HEX_CONST    NILE3_PCICMD_DPR		0x01000000
	HEX_CONST    NILE3_PCICMD_STA		0x08000000
	HEX_CONST    NILE3_PCICMD_RTA		0x10000000
	HEX_CONST    NILE3_PCICMD_RMA		0x20000000
	HEX_CONST    NILE3_PCICMD_SSE		0x40000000
	HEX_CONST    NILE3_PCICMD_DPE		0x80000000
;
;/* Nile 3 PCI Master Latency Timer */
;/* note that bit maks defines 8 bits. but bottom 3 are always 0 */
	REG NILE3_MLTIM			(NILE3_BASE+0x10C)
	HEX_CONST    NILE3_MLTIM_VAL		0x0000FF00
;
;/* Nile 3 Mailbox Register addresses */
	REG NILE3_MBADD			(NILE3_BASE+0x110)
	HEX_CONST    NILE3_MBADD_MASK		0xFFFFF000
;
;/* Nile 3 PCI Retry Timer and Arbiter control */
	REG NILE3_RTYTIM		(NILE3_BASE+0x140)
	HEX_CONST    NILE3_RTYTIM_MASK		0x0000ff00
	HEX_CONST    NILE3_RTYTIM_ARB_FAIR	0x00000000
	HEX_CONST    NILE3_RTYTIM_ARB_ALT0	0x01000000
	HEX_CONST    NILE3_RTYTIM_ARB_ALT1	0x02000000
	HEX_CONST    NILE3_RTYTIM_TKYGNT	0x04000000
;
.endc	;_NILE3_MAC_
@


1.1
log
@Initial revision
@
text
@d65 3
@
